# Configuración para Cloudflare Pages
# Archivo: wrangler.toml

name = "felipe-legal-ai"
compatibility_date = "2024-01-15"

[env.production]
name = "felipe-legal-ai"
route = "felipe.tu-dominio.com/*"

[env.production.vars]
NODE_ENV = "production"
VITE_API_URL = "https://api.felipe.tu-dominio.com"
VITE_MCP_URL = "wss://mcp.felipe.tu-dominio.com"

[[env.production.services]]
binding = "DB"
service = "felipe-database"

[[env.production.services]]
binding = "AI"
service = "felipe-ai-worker"

[build]
command = "npm run build"
cwd = "."
watch_dir = "src"

[build.upload]
format = "service-worker"
dir = "dist"
main = "./dist/index.html"

# Workers para funciones serverless
[[workers]]
name = "felipe-ai-worker"
script = "workers/ai-worker.js"
compatibility_date = "2024-01-15"

[[workers.bindings]]
name = "AI_MODEL"
type = "ai"
model = "@cf/meta/llama-2-7b-chat-int8"

[[workers.bindings]]
name = "VECTORIZE"
type = "vectorize"
index_name = "legal-knowledge"

# Configuración de Pages
[pages]
build_output_dir = "dist"
build_command = "npm run build"